version: "3"

services:
  localstack:
    image: localstack/localstack-light:0.11.1
    ports:
      - "4566-4568:4566-4568"
    volumes:
      - "./.localstack:/tmp/localstack"
      - "./localstack:/docker-entrypoint-initaws.d"
      - "/var/run/docker.sock:/var/run/docker.sock"
    logging:
      options:
        max-size: 1M
        max-file: "10"
    environment:
      - SERVICES=sqs,kinesis,dynamodb
      - DATA_DIR=/tmp/localstack/data
  pubsub:
    image: bigtruedata/gcloud-pubsub-emulator
    command: start --host-port 0.0.0.0:8432
    ports:
      - "0.0.0.0:8432:8432"

